---
import { icons } from './icons';
import type { IconName } from './icons';

interface Props {
  variant?: 'automation' | 'security' | 'appdev' | 'general';
}

const { variant = 'general' } = Astro.props;

const VARIANTS = {
  automation: {
    icon: 'zap' as IconName,
    accent: '#00d4aa',
    accentDim: 'rgba(0,212,170,0.12)',
    tagline: 'この自動化、あなたの業務にも',
    headline: '業務自動化・AI統合を依頼しませんか？',
    body: 'SNS運用、データ収集、レポート生成、コンテンツ制作——手作業で回している業務をAIと自動化で解決します。ローカルLLM環境の構築にも対応。',
    cta: '無料で相談する',
    link: 'https://secure-auto-lab.com/services/automation',
    contact: 'https://secure-auto-lab.com/contact',
    badges: ['LLM / RAG', '画像生成AI', 'SNS自動運用', 'データ収集'],
  },
  security: {
    icon: 'shield' as IconName,
    accent: '#4dabf7',
    accentDim: 'rgba(77,171,247,0.12)',
    tagline: 'セキュリティは後付けではなく標準装備',
    headline: 'セキュアなシステム開発を依頼しませんか？',
    body: '情報処理安全確保支援士（登録セキスペ）が、設計段階からセキュリティを組み込んだWebアプリ・API開発を行います。認証・RLS・暗号化・E2Eテスト込み。',
    cta: '無料で相談する',
    link: 'https://secure-auto-lab.com/services/secure-dev',
    contact: 'https://secure-auto-lab.com/contact',
    badges: ['認証/認可設計', 'RLS', 'E2Eテスト', '脆弱性対策'],
  },
  appdev: {
    icon: 'rocket' as IconName,
    accent: '#b197fc',
    accentDim: 'rgba(177,151,252,0.12)',
    tagline: 'アイデアをプロダクトに',
    headline: 'アプリ・サービス開発を依頼しませんか？',
    body: 'Webアプリ、モバイルアプリ、LP制作からマネタイズ設計まで一貫対応。PMとしてプロジェクトを完遂する力があります。',
    cta: '無料で相談する',
    link: 'https://secure-auto-lab.com/services/app-dev',
    contact: 'https://secure-auto-lab.com/contact',
    badges: ['React / Next.js', 'iOS / Android', '課金実装', 'MVP開発'],
  },
  general: {
    icon: 'briefcase' as IconName,
    accent: '#00d4aa',
    accentDim: 'rgba(0,212,170,0.12)',
    tagline: '技術でビジネスを加速する',
    headline: '開発パートナーをお探しですか？',
    body: 'AI統合・業務自動化・セキュアなシステム構築。情報処理安全確保支援士 × プロジェクトマネージャのフルスタック開発。企画からリリースまで一貫対応。',
    cta: 'サービスを見る',
    link: 'https://secure-auto-lab.com',
    contact: 'https://secure-auto-lab.com/contact',
    badges: ['AI統合', '業務自動化', 'セキュリティ', 'PM'],
  },
} as const;

const v = VARIANTS[variant] || VARIANTS.general;
---

<div class="blog-cta" style={`--cta-accent: ${v.accent}; --cta-accent-dim: ${v.accentDim};`}>
  <!-- Divider -->
  <div class="flex items-center gap-3 mb-6">
    <div class="flex-1 h-px" style={`background: linear-gradient(90deg, transparent, ${v.accent}40, transparent)`}></div>
    <span class="text-[10px] font-mono tracking-widest uppercase" style={`color: ${v.accent}`}>
      AD — Secure Auto Lab
    </span>
    <div class="flex-1 h-px" style={`background: linear-gradient(90deg, transparent, ${v.accent}40, transparent)`}></div>
  </div>

  <!-- Main Card -->
  <div class="cta-card">
    <!-- Background glow -->
    <div class="absolute -top-10 -right-10 w-[200px] h-[200px] pointer-events-none" style={`background: radial-gradient(circle, ${v.accent}08, transparent 70%)`}></div>

    <!-- Tagline -->
    <div class="inline-flex items-center gap-1.5 px-3 py-1 rounded mb-4" style={`background: ${v.accentDim}; border: 1px solid ${v.accent}25;`}>
      <span class="inline-flex w-[14px] h-[14px]" style={`color: ${v.accent}`} set:html={icons[v.icon]} />
      <span class="text-[11px] font-mono font-semibold tracking-wide" style={`color: ${v.accent}`}>
        {v.tagline}
      </span>
    </div>

    <!-- Headline -->
    <h3 class="text-xl font-bold text-[#e8f0f8] mb-2.5 leading-snug tracking-tight">
      {v.headline}
    </h3>

    <!-- Body -->
    <p class="text-sm text-[#8a9bb5] leading-relaxed mb-4 max-w-[600px]">
      {v.body}
    </p>

    <!-- Badges -->
    <div class="flex gap-1.5 flex-wrap mb-5">
      {v.badges.map((b) => (
        <span class="text-[10px] font-mono px-2.5 py-1 rounded bg-[#141c28] border border-[#1e2a3a] text-[#8a9bb5] tracking-wide">
          {b}
        </span>
      ))}
    </div>

    <!-- CTA Buttons -->
    <div class="flex gap-3 items-center flex-wrap">
      <a
        href={v.contact}
        target="_blank"
        rel="noopener noreferrer"
        class="cta-primary"
        style={`background: linear-gradient(135deg, ${v.accent}, ${v.accent}cc); box-shadow: 0 2px 12px ${v.accent}30;`}
      >
        {v.cta}
        <span class="text-[15px]">→</span>
      </a>

      <a
        href={v.link}
        target="_blank"
        rel="noopener noreferrer"
        class="cta-secondary"
      >
        サービス詳細を見る
      </a>
    </div>

    <!-- Credentials -->
    <div class="mt-5 pt-4 border-t border-[#1a2232] flex items-center gap-4 text-[10px] font-mono text-[#4a5c72] tracking-wide">
      <span class="inline-flex items-center gap-1"><span class="inline-flex w-[12px] h-[12px]" set:html={icons.shield} /> 情報処理安全確保支援士 (RISS)</span>
      <span class="inline-flex items-center gap-1"><span class="inline-flex w-[12px] h-[12px]" set:html={icons.clipboardList} /> プロジェクトマネージャ (PM)</span>
    </div>
  </div>
</div>

<style>
  .blog-cta {
    margin: 48px 0 32px;
  }

  .cta-card {
    background: #0c1017;
    border: 1px solid #1e2a3a;
    border-radius: 12px;
    padding: 28px 28px 24px;
    position: relative;
    overflow: hidden;
    transition: border-color 0.3s, box-shadow 0.3s;
  }

  .cta-card:hover {
    border-color: color-mix(in srgb, var(--cta-accent) 40%, transparent);
    box-shadow: 0 0 30px color-mix(in srgb, var(--cta-accent) 8%, transparent);
  }

  .cta-primary {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 10px 24px;
    border-radius: 6px;
    color: #0a0e14;
    font-size: 13px;
    font-weight: 700;
    text-decoration: none;
    transition: transform 0.15s, box-shadow 0.15s;
  }

  .cta-primary:hover {
    transform: translateY(-1px);
  }

  .cta-secondary {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 10px 20px;
    border-radius: 6px;
    background: transparent;
    border: 1px solid #2a3a4e;
    color: #8a9bb5;
    font-size: 13px;
    font-weight: 500;
    text-decoration: none;
    transition: border-color 0.2s, color 0.2s;
  }

  .cta-secondary:hover {
    border-color: color-mix(in srgb, var(--cta-accent) 40%, transparent);
    color: #c8d6e5;
  }
</style>
